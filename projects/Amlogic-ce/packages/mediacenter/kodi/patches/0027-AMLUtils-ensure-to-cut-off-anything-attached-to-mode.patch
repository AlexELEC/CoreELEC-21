From 9ff661b0c350e9d55c80f7c708713e43a73ef241 Mon Sep 17 00:00:00 2001
From: portisch <hugo.portisch@yahoo.de>
Date: Wed, 12 Jun 2024 16:52:44 +0200
Subject: [PATCH 27/34] AMLUtils: ensure to cut off anything attached to mode
 name Cut off any option from mode name.

---
 xbmc/utils/AMLUtils.cpp | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

diff --git a/xbmc/utils/AMLUtils.cpp b/xbmc/utils/AMLUtils.cpp
index 7601ca4b19..1867b94ff0 100644
--- a/xbmc/utils/AMLUtils.cpp
+++ b/xbmc/utils/AMLUtils.cpp
@@ -596,6 +596,24 @@ bool aml_set_display_resolution(const RESOLUTION_INFO &res, std::string framebuf
   std::string mode = res.strId.c_str();
   std::string cur_mode;
   std::string custom_mode;
+  std::vector<std::string> _mode = StringUtils::Split(mode, ' ');
+  std::string mode_options;
+
+  if (_mode.size() > 1)
+  {
+    mode = _mode[0];
+    unsigned int i = 1;
+    while(i < (_mode.size() - 1))
+    {
+      if (i > 1)
+        mode_options.append(" ");
+      mode_options.append(_mode[i]);
+      i++;
+    }
+    CLog::Log(LOGDEBUG, "{}: try to set mode: {} ({})", __FUNCTION__, mode.c_str(), mode_options.c_str());
+  }
+  else
+    CLog::Log(LOGDEBUG, "{}: try to set mode: {}", __FUNCTION__, mode.c_str());
 
   CSysfsPath display_mode{"/sys/class/display/mode"};
   if (display_mode.Exists())
-- 
2.45.2

